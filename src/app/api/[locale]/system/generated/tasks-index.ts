/**
 * AUTO-GENERATED TASK INDEX
 * Generated by Task Index Generator
 *
 * Implements: spec.md unified task registry requirements
 * Task files: 9
 * Task runner files: 2
 */

/* eslint-disable prettier/prettier */
/* eslint-disable simple-import-sort/imports */

import type {
  Task,
  TaskRegistry,
} from "../unified-interface/tasks/unified-runner/types";

import { tasks as taskModule0 } from "../unified-interface/tasks/task-sync/task";
import { tasks as taskModule1 } from "../unified-interface/tasks/db-health/task";
import { tasks as taskModule2 } from "../../leads/campaigns/campaign-starter/task";
import { tasks as taskModule3 } from "../../leads/campaigns/email-campaigns/task";
import { tasks as taskModule4 } from "../../leads/import/task";
import { tasks as taskModule5 } from "../../user/session-cleanup/task";
import { tasks as taskModule6 } from "../../credits/expire/task";
import { tasks as taskModule7 } from "../../emails/imap-client/sync/task";
import { tasks as taskModule8 } from "../../newsletter/unsubscribe/task";
import { taskRunners as runnerModule9 } from "../unified-interface/tasks/pulse/task-runner";
import { taskRunners as runnerModule10 } from "../unified-interface/tasks/dev-watcher/task-runner";

const allTasks: Task[] = [
  ...taskModule0,
  ...taskModule1,
  ...taskModule2,
  ...taskModule3,
  ...taskModule4,
  ...taskModule5,
  ...taskModule6,
  ...taskModule7,
  ...taskModule8,
  ...runnerModule9,
  ...runnerModule10,
];

const cronTasks = allTasks.filter(
  (task): task is Task & { type: "cron" } => task.type === "cron",
);
const taskRunners = allTasks.filter(
  (task): task is Task & { type: "task-runner" } => task.type === "task-runner",
);

const tasksByCategory: Record<string, Task[]> = allTasks.reduce<
  Record<string, Task[]>
>((acc, task) => {
  const category = String(task.category);
  if (!acc[category]) {
    acc[category] = [];
  }
  acc[category].push(task);
  return acc;
}, {});

const tasksByName: Record<string, Task> = allTasks.reduce<Record<string, Task>>(
  (acc, task) => {
    acc[task.name] = task;
    return acc;
  },
  {},
);

export const taskRegistry: TaskRegistry = {
  cronTasks,
  taskRunners,
  allTasks,
  tasksByCategory,
  tasksByName,
};

export { allTasks, cronTasks, taskRunners, tasksByCategory, tasksByName };
export default allTasks;
