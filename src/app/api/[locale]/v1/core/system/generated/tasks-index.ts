/**
 * AUTO-GENERATED TASK INDEX
 * Generated by Task Index Generator
 *
 * Implements: spec.md unified task registry requirements
 * Task files: 5
 * Task runner files: 2
 * Side task config files: 0
 * Generated at: 2025-11-06T12:38:18.228Z
 */

/* eslint-disable prettier/prettier */
/* eslint-disable simple-import-sort/imports */

import type { Task, TaskRegistry, TaskRunnerManager } from "../unified-interface/tasks/types/repository";
import { UnifiedTaskRunnerRepositoryImpl } from "../unified-interface/tasks/unified-runner/repository";

import { tasks as taskModule0 } from "../../leads/import/task";
import { tasks as taskModule1 } from "../../user/session-cleanup/task";
import { tasks as taskModule2 } from "../../credits/expire/task";
import { tasks as taskModule3 } from "../../emails/imap-client/sync/task";
import { tasks as taskModule4 } from "../../newsletter/unsubscribe/task";
import { taskRunners as runnerModule5 } from "../unified-interface/tasks/dev-watcher/task-runner";
import { taskRunners as runnerModule6 } from "../unified-interface/tasks/pulse-runner/task-runner";

const allTasks: Task[] = [
  ...taskModule0,
  ...taskModule1,
  ...taskModule2,
  ...taskModule3,
  ...taskModule4,
  ...runnerModule5,
  ...runnerModule6,
];

const cronTasks = allTasks.filter((task): task is Task & { type: 'cron' } => task.type === 'cron');
const sideTasks = allTasks.filter((task): task is Task & { type: 'side' } => task.type === 'side');
const taskRunners = allTasks.filter((task): task is Task & { type: 'task-runner' } => task.type === 'task-runner');

const tasksByCategory: Record<string, Task[]> = allTasks.reduce<Record<string, Task[]>>((acc, task) => {
  const category = String(task.category);
  if (!acc[category]) {
    acc[category] = [];
  }
  acc[category].push(task);
  return acc;
}, {});

const tasksByName: Record<string, Task> = allTasks.reduce<Record<string, Task>>((acc, task) => {
  acc[task.name] = task;
  return acc;
}, {});

// Create single unified task runner instance as per spec.md
const taskRunner: TaskRunnerManager = new UnifiedTaskRunnerRepositoryImpl();

export const taskRegistry: TaskRegistry = {
  cronTasks,
  sideTasks,
  taskRunners,
  allTasks,
  tasksByCategory,
  tasksByName,
  taskRunner, // Single unified task runner instance
};

export { allTasks, cronTasks, sideTasks, taskRunner, taskRunners, tasksByCategory, tasksByName };
export default allTasks;
